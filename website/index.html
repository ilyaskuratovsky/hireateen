<html>
  <head>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body onLoad="init()">
    <script src="people.js"></script>
    <h1>Greenwich Hire-a-Teen</h1>

    <table id="main_table">
      <tr>
        <td>
          Hire-a-teen was developed by a high school student in search of job.
        </td>
      </tr>
      <tr>
        <td>
          <h2>Job Categories:</h2>
          <button class="filter_button" onClick="setFilter(null)">All</button>
          <button class="filter_button" onClick="setFilter('Babysitting')">
            Babysitting
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Tutoring')"
            class="categories"
          >
            Tutoring
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Sports training')"
            class="categories"
          >
            Sports training
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Yard work')"
            class="categories"
          >
            Yard work
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Music lessons')"
            class="categories"
          >
            Music lessons
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Art lessons')"
            class="categories"
          >
            Art lessons
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Power washing')"
            class="categories"
          >
            Power washing
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Car Detailing')"
            class="categories"
          >
            Car Detailing
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Dog walking/Pet sitting')"
            class="categories"
            id=""
          >
            Dog walking/Pet sitting
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Photography')"
            class="categories"
          >
            Photography
          </button>
          <button
            class="filter_button"
            onclick="setFilter('Chores')"
            class="categories"
          >
            Chores
          </button>
        </td>
      </tr>
      <tr>
        <td>
          <table id="profiles"></table>
        </td>
      </tr>
      <tr></tr>
    </table>
    <script>
      function init() {
        const table = document.getElementById("profiles");
        for (profile of PROFILES) {
          const row = document.createElement("tr");
          row.style.backgroundColor = "silver";
          row.innerHTML = `
            <td height="100" width="100" style="border:1px solid black; vertical-align:top;align:center; padding-top:12px">
              [Picture Here]<br/>
              ${profile.quick_info}
            </td>
            <td style="vertical-align:top; padding:10px">
              <h2>${profile.name}</h2>
              <table border="0">
                <tr>
                  <td>
                  <b>About Me</b><br/>
                  ${profile.about_me}
                  </td>
                </tr>
                <tr>
                  <td>
                  <b>Available For</b><br/>
                  ${profile.available_for}
                  </td>
                </tr>
                <tr>
                  <td>
                  <b>Contact Information</b><br/>
                  ${profile.contact}
                  </td>
                </tr>
              </table>
            </td>
        `;
          table.appendChild(row);
        }
        filter();
      }
      let FILTER = null;
      function filter() {
        const buttons = document.getElementsByClassName("filter_button");
        for (button of buttons) {
          console.log("button: " + button.textContent.trim());
          if (button.textContent.trim() === FILTER) {
            button.style.backgroundColor = "yellow";
          } else if (button.textContent === "All" && FILTER == null) {
            button.style.backgroundColor = "yellow";
          } else {
            button.style.backgroundColor = null;
          }
        }

        console.log("filter() called: " + FILTER);
        const table = document.getElementById("profiles");
        table.innerHTML = "";
        for (profile of PROFILES) {
          if (FILTER != null && !(profile.categories ?? []).includes(FILTER)) {
            continue;
          }
          const row = document.createElement("tr");
          row.style.backgroundColor = "silver";
          row.innerHTML = `
            <td height="100" width="100" style="border:1px solid black; vertical-align:top;align:center; padding-top:12px">
              [Picture Here]<br/>
              ${profile.quick_info}
            </td>
            <td style="vertical-align:top; padding:10px">
              <h2>${profile.name}</h2>
              <table border="0">
                <tr>
                  <td>
                  <b>About Me</b><br/>
                  ${profile.about_me}
                  </td>
                </tr>
                <tr>
                  <td>
                  <b>Available For</b><br/>
                  ${profile.available_for}
                  </td>
                </tr>
                <tr>
                  <td>
                  <b>Contact Information</b><br/>
                  ${profile.contact}
                  </td>
                </tr>
              </table>
            </td>
        `;
          table.appendChild(row);
        }
      }
      function setFilter(f) {
        console.log(
          "setFilter: " +
            f +
            " FILTER: " +
            FILTER +
            ", f === FILTER: " +
            (f === FILTER ? "true" : "false"),
        );
        if (f != null && f === FILTER) {
          FILTER = null;
        } else {
          FILTER = f;
        }
        filter();
        console.log("FILTER: " + FILTER);
      }
    </script>
  </body>
</html>
